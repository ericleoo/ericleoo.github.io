{"type":"data","nodes":[null,{"type":"data","data":[{"html":1,"meta":2},"\u003Cp\u003ESo SvelteKit is super awesome n’ all and the best thing ever but have\nyou ever tried to use a \u003Ccode\u003E.env\u003C\u002Fcode\u003E secret that you didn’t want exposed on\nthe client?\u003C\u002Fp\u003E\n\u003Cp\u003ESvelteKit uses \u003Ca href=\"https:\u002F\u002Fvitejs.dev\u002F\" rel=\"noopener\" target=\"_blank\"\u003EVite\u003C\u002Fa\u003E and it has a specific way to reference \u003Ca href=\"https:\u002F\u002Fvitejs.dev\u002Fguide\u002Fenv-and-mode.html#env-variables\" rel=\"noopener\" target=\"_blank\"\u003EEnv\nVariables and Modes\u003C\u002Fa\u003E, you reference a \u003Ccode\u003E.env\u003C\u002Fcode\u003E variable with\n\u003Ccode\u003E({}).VITE_NAME_OF_VARIABLE\u003C\u002Fcode\u003E the \u003Ccode\u003EVITE_*\u003C\u002Fcode\u003E prefix means in\nSvelteKit it makes that variable available on the client.\u003C\u002Fp\u003E\n\u003Ch2\u003EWhat if you have a secret key?\u003C\u002Fh2\u003E\n\u003Cp\u003ESo if you want a secret key that’s not exposed to the client then,\nwhat? Remove the \u003Ccode\u003EVITE_*\u003C\u002Fcode\u003E prefix? Well, no, so, how to have secrets??\u003C\u002Fp\u003E\n\u003Cp\u003EThe answer is don’t use Vite and instead use something to load the\nvariables from the \u003Ccode\u003E.env\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EUse \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fenv-cmd\" rel=\"noopener\" target=\"_blank\"\u003Eenv-cmd\u003C\u002Fa\u003E or \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fdotenv\" rel=\"noopener\" target=\"_blank\"\u003Edotenv\u003C\u002Fa\u003E or whatever you want to use to ensure the\nruntime \u003Ccode\u003Eprocess.env\u003C\u002Fcode\u003E is populated in dev.\u003C\u002Fp\u003E\n\u003Ch2\u003EExample\u003C\u002Fh2\u003E\n\u003Cp\u003EHere I have defined my \u003Ccode\u003E.env\u003C\u002Fcode\u003E file at the root of my project:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-python\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-python\"\u003EVITE_CLIENT_VARIABLE\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Ewheeeeeeeee\nSUPER_SECRET_SECRET\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Eshhhhhh\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen I’ve created a \u003Ccode\u003Esecret.js\u003C\u002Fcode\u003E file to access my secret:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token constant\"\u003EAPI_URL\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E process\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eenv\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'SUPER_SECRET_SECRET'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen I’ve added \u003Ccode\u003Eenv-cmd\u003C\u002Fcode\u003E to my \u003Ccode\u003Edev\u003C\u002Fcode\u003E script in my \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E so\nthat \u003Ccode\u003Eprocess.env\u003C\u002Fcode\u003E has the super secret secret populated:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token property\"\u003E\"scripts\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"dev\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"env-cmd svelte-kit dev\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow I can access my super secret secret and have client side variables\ntoo.\u003C\u002Fp\u003E\n\u003Ch2\u003EThanks!\u003C\u002Fh2\u003E\n\u003Cp\u003EA kind thank you to Discord users \u003Ccode\u003EXyo\u003C\u002Fcode\u003E and especially \u003Ccode\u003Esaikatdas0790\u003C\u002Fcode\u003E\non the Svelte Discord \u003Ccode\u003Esvelte-kit\u003C\u002Fcode\u003E channel for helping me out with\nthis!\u003C\u002Fp\u003E",{"date":3,"title":4,"published":5,"slug":-1},"2021-06-22T00:00:00.000Z","SvelteKit .env secrets",true],"uses":{"params":["slug","post"]}}]}