<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width" />
		<meta http-equiv="content-security-policy" content="">
		<link rel="modulepreload" href="../_app/immutable/start-e2448ca4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-1c54e198.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons-247c70db.js">
		<link rel="modulepreload" href="../_app/immutable/components/layout.svelte-987c304f.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/_layout.js-7b9cbfbc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout-8d2a742b.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/posts/_slug_/_page.svelte-6f839257.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/head-a5cfd1c5.js"><title>Post | Make an RSS Feed for your SvelteKit Project</title><!-- HEAD_svelte-enfip_START --><link rel="canonical"><meta name="description"><meta name="author" content="Eric"><meta itemprop="name" content="Post | Make an RSS Feed for your SvelteKit Project"><meta itemprop="description"><meta itemprop="image"><meta property="og:url"><meta property="og:type" content="website"><meta property="og:title" content="Post | Make an RSS Feed for your SvelteKit Project"><meta property="og:description"><meta property="og:image"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:domain" content="https://ericleoo.github.io"><meta property="twitter:url"><meta name="twitter:title" content="Post | Make an RSS Feed for your SvelteKit Project"><meta name="twitter:description"><meta name="twitter:image"><meta name="monetization" content="$ilp.uphold.com/bzPBWkMBzLmN"><!-- HEAD_svelte-enfip_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">




<article class="flex flex-col flex-grow"><h1 class="font-bold mb-5 text-5xl">Make an RSS Feed for your SvelteKit Project</h1>
  <div class=""><p>Mon Aug 09 2021</p>
    <article class="all-prose"><!-- HTML_TAG_START --><p>The indie web is alive and well and there are more and more people
taking control and owning their online presence and also how they
consume other content. One way to help consumers of your site know
that there is new content available is by making your content
available via an RSS feed.</p>
<p>I made an RSS feed for my <a href="https://scottspence.com/posts" rel="noopener" target="_blank">blog</a> using SvelteKit routes. I did this
much like the <a href="https://scottspence.com/posts/dynamic-sitemap-generation-with-nextjs-and-sanity" rel="noopener" target="_blank">Sitemap Generation for Dynamic Routes In NextJS with
the Sanity Client</a> post I did back in February.</p>
<h2>RSS on <a href="https://scottspence.com" rel="noopener" target="_blank"><code>scottspence.com</code></a></h2>
<p>As I mentioned already as my blog is a SvelteKit project I can use the
SvelteKit <a href="https://kit.svelte.dev/docs#routing-endpoints" rel="noopener" target="_blank">routing endpoints</a> to define the data type I want returned
from that endpoint.</p>
<p>RSS feeds are expected in XML format and I want my endpoint to be
<a href="https://scottspence.com/rss.xml" rel="noopener" target="_blank"><code>https://scottspence.com/rss.xml</code></a> so I’ve defined a file in my
routes folder called <code>rss.xml.js</code> this is located in the routes folder
of the project, so the full path would be <code>src/routes/rss.xml.js</code>.</p>
<h2>RSS route</h2>
<p>For this guide I’ll using the great <a href="https://github.com/mattjennings/sveltekit-blog-template" rel="noopener" target="_blank">template from Matt Jennings</a>
(which this blog is based off of) as an example of how to do it.</p>
<p>I’m using the template as it’s the most basic example to use and there
won’t be any additional project specific routes that will need to be
taken into account.</p>
<p>Let’s take a quick look at how the project is structured:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash">sveltekit-blog-template/
├─ posts/
├─ src/
│ └─ lib/
│ └─ routes/
│ │ └─ posts/
│ │   └─ <span class="token punctuation">[</span>slug<span class="token punctuation">]</span>.svelte/
│ │─ __layout.svelte/
│ └─ index.svelte/
<span class="token punctuation">..</span>.rest of the files</code><!-- HTML_TAG_END --></pre>
<p>I’ve left some of the filing structure that isn’t relevant right now.</p>
<p>For now I want to focus on the routes folder as this is where I’ll be
creating the RSS page.</p>
<h2>Clone the project</h2>
<p>Ok, let’s get to work, I’ll start by cloning the project and changing
directory into the newly cloned project. Then I’ll install the
dependencies and run the dev server:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token comment"># using SSH</span>
<span class="token function">git</span> clone git@github.com:mattjennings/sveltekit-blog-template
<span class="token comment"># using HTTPS</span>
<span class="token function">git</span> clone https://github.com/mattjennings/sveltekit-blog-template
<span class="token builtin class-name">cd</span> sveltekit-blog-template
<span class="token function">npm</span> i
<span class="token function">npm</span> run dev</code><!-- HTML_TAG_END --></pre>
<p>Now Matt’s awesome template is up and running on the default port on
<code>localhost:3000</code>. If I go to <code>localhost:3000/rss.xml</code> I get a 404.
This is because I’ve not made that route yet.</p>
<h2>Add the RSS route</h2>
<p>Now to create the endpoint for where the RSS feed will be located:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token function">touch</span> src/routes/rss.xml.js</code><!-- HTML_TAG_END --></pre>
<p>Now if I go to <code>localhost:3000/rss.xml</code> I get a 404.</p>
<p>In the <code>rss.xml.js</code> file I’ll create a <code>get()</code> function which will
need to return the RSS XML and the headers for the endpoint, the XML
is inside <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener" target="_blank">template literals</a> so I can add in the dynamic data I want
to return later in this post:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string-property property">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;rss xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:content="https://purl.org/rss/1.0/modules/content/" xmlns:atom="https://www.w3.org/2005/Atom" version="2.0">&lt;/rss></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>In the <code>headers</code> I’m setting the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#expiration" rel="noopener" target="_blank">expiration</a> to an hour with
<code>s-maxage</code> and for the <code>body</code> adding in the XML heading. You can check
out the <a href="https://validator.w3.org/feed/docs/rss2.html" rel="noopener" target="_blank">W3C Feed Validation Service</a> for more detail on what’s needed
here.</p>
<p>Now if I go check <code>localhost:3000/rss.xml</code> I get the beginning of my
RSS feed.</p>
<h2>Add <code>&lt;channel&gt;</code> required elements</h2>
<p>Now to add in the <code>&lt;channel&gt;</code> element with the required <code>&lt;title&gt;</code>,
<code>&lt;link&gt;</code> and <code>&lt;description&gt;</code> elements. In Matt’s template there’s an
<code>info.js</code> file that contains the project <code>name</code> and <code>website</code> links.
I’ll import these and hardcode in a description for now.</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string-property property">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;rss xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:content="https://purl.org/rss/1.0/modules/content/" xmlns:atom="https://www.w3.org/2005/Atom" version="2.0">
      &lt;channel>
        &lt;title></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/title>
        &lt;link></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/link>
        &lt;description>A blog built with SvelteKit about tech and stuff!&lt;/description>
      &lt;/channel>
    &lt;/rss></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<h2>Add posts for the RSS feed</h2>
<p>Now I’m going to need to add the posts to the RSS feed. I’m going to
copy the code used to source the posts from <code>src/routes/index.svelte</code>
and add it to the <code>src/lib</code> folder as <code>get-posts.js</code>.</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token comment"># create the file</span>
<span class="token function">touch</span> src/lib/get-posts.js</code><!-- HTML_TAG_END --></pre>
<p>The code for get posts is:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>
    <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'/posts/**/*.md'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
    <span class="token comment">// get post metadata</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">,</span> post<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> post<span class="token punctuation">.</span>metadata<span class="token punctuation">)</span>
    <span class="token comment">// sort by date</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>date <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> posts
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>I’ll now import that into the <code>rss.xml.js</code> file so I can map over the
contents for each <code>&lt;item&gt;</code> in the RSS feed.</p>
<p>First up though, rather than have the return statement all cluttered
up with the generated XML I’ll break this into it’s own function:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getPosts <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/get-posts'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token function">xml</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span>

  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string-property property">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">xml</span> <span class="token operator">=</span>
  <span class="token parameter">posts</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;rss xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:content="https://purl.org/rss/1.0/modules/content/" xmlns:atom="https://www.w3.org/2005/Atom" version="2.0">
  &lt;channel>
    &lt;title></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/title>
    &lt;link></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/link>
    &lt;description>A blog built with SvelteKit about tech and stuff!&lt;/description>
  &lt;/channel>
&lt;/rss></span><span class="token template-punctuation string">&#96;</span></span></code><!-- HTML_TAG_END --></pre>
<p>Now it’s a case of mapping over the posts and creating the XML for
each post in posts. I’ll do that in the template using tags <code>${}</code> and
mapping over the <code>posts</code> variable returned from <code>getPosts</code>.</p>
<p>Here’s the complete file:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getPosts <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/get-posts'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token function">xml</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span>

  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string-property property">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">xml</span> <span class="token operator">=</span>
  <span class="token parameter">posts</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;rss xmlns:dc="https://purl.org/dc/elements/1.1/" xmlns:content="https://purl.org/rss/1.0/modules/content/" xmlns:atom="https://www.w3.org/2005/Atom" version="2.0">
  &lt;channel>
    &lt;title></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/title>
    &lt;link></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/link>
    &lt;description>A blog built with SvelteKit about tech and stuff!&lt;/description>
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
        <span class="token parameter">post</span> <span class="token operator">=></span>
          <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
        &lt;item>
          &lt;title></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/title>
          &lt;description>A blog built with SvelteKit about tech and stuff!&lt;/description>
          &lt;link></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/&lt;/link>
          &lt;pubDate></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/pubDate>
          &lt;content:encoded></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>previewHtml<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> 
            &lt;div style="margin-top: 50px; font-style: italic;">
              &lt;strong>
                &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">">
                  Keep reading
                &lt;/a>
              &lt;/strong>  
            &lt;/div>
          &lt;/content:encoded>
        &lt;/item>
      </span><span class="token template-punctuation string">&#96;</span></span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
  &lt;/channel>
&lt;/rss></span><span class="token template-punctuation string">&#96;</span></span></code><!-- HTML_TAG_END --></pre>
<p>You’ll notice I’ve added some extra markup for <code>&lt;content:encoded&gt;</code> and
this uses Matt’s handy package <code>remark-preview</code> to allow me to add
HTML to the RSS feed.</p>
<p>There’s also a link to take the reader to the site’s post via the
<code>post.slug</code> with some inline styling.</p>
<h2>Conclusion</h2>
<p>Now if I go to <code>localhost:3000/rss.xml</code> I get a very reasonable RSS
feed that can be used to syndicate to other sites and RSS readers.</p>
<p>Although this is a very specific example I hope it’s helped you
understand how you could do something similar with your own SvelteKit
project.</p>
<!-- HTML_TAG_END --></article></div></article>


		<script type="module" data-sveltekit-hydrate="vfccdv">
			import { start } from "../_app/immutable/start-e2448ca4.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 3],
					params: {slug:"make-an-rss-feed-with-sveltekit"},
					route: {"id":"/posts/[slug]"},
					data: [null,{type:"data",data:{html:"\u003Cp\u003EThe indie web is alive and well and there are more and more people\ntaking control and owning their online presence and also how they\nconsume other content. One way to help consumers of your site know\nthat there is new content available is by making your content\navailable via an RSS feed.\u003C\u002Fp\u003E\n\u003Cp\u003EI made an RSS feed for my \u003Ca href=\"https:\u002F\u002Fscottspence.com\u002Fposts\" rel=\"noopener\" target=\"_blank\"\u003Eblog\u003C\u002Fa\u003E using SvelteKit routes. I did this\nmuch like the \u003Ca href=\"https:\u002F\u002Fscottspence.com\u002Fposts\u002Fdynamic-sitemap-generation-with-nextjs-and-sanity\" rel=\"noopener\" target=\"_blank\"\u003ESitemap Generation for Dynamic Routes In NextJS with\nthe Sanity Client\u003C\u002Fa\u003E post I did back in February.\u003C\u002Fp\u003E\n\u003Ch2\u003ERSS on \u003Ca href=\"https:\u002F\u002Fscottspence.com\" rel=\"noopener\" target=\"_blank\"\u003E\u003Ccode\u003Escottspence.com\u003C\u002Fcode\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\n\u003Cp\u003EAs I mentioned already as my blog is a SvelteKit project I can use the\nSvelteKit \u003Ca href=\"https:\u002F\u002Fkit.svelte.dev\u002Fdocs#routing-endpoints\" rel=\"noopener\" target=\"_blank\"\u003Erouting endpoints\u003C\u002Fa\u003E to define the data type I want returned\nfrom that endpoint.\u003C\u002Fp\u003E\n\u003Cp\u003ERSS feeds are expected in XML format and I want my endpoint to be\n\u003Ca href=\"https:\u002F\u002Fscottspence.com\u002Frss.xml\" rel=\"noopener\" target=\"_blank\"\u003E\u003Ccode\u003Ehttps:\u002F\u002Fscottspence.com\u002Frss.xml\u003C\u002Fcode\u003E\u003C\u002Fa\u003E so I’ve defined a file in my\nroutes folder called \u003Ccode\u003Erss.xml.js\u003C\u002Fcode\u003E this is located in the routes folder\nof the project, so the full path would be \u003Ccode\u003Esrc\u002Froutes\u002Frss.xml.js\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2\u003ERSS route\u003C\u002Fh2\u003E\n\u003Cp\u003EFor this guide I’ll using the great \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmattjennings\u002Fsveltekit-blog-template\" rel=\"noopener\" target=\"_blank\"\u003Etemplate from Matt Jennings\u003C\u002Fa\u003E\n(which this blog is based off of) as an example of how to do it.\u003C\u002Fp\u003E\n\u003Cp\u003EI’m using the template as it’s the most basic example to use and there\nwon’t be any additional project specific routes that will need to be\ntaken into account.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s take a quick look at how the project is structured:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003Esveltekit-blog-template\u002F\n├─ posts\u002F\n├─ src\u002F\n│ └─ lib\u002F\n│ └─ routes\u002F\n│ │ └─ posts\u002F\n│ │   └─ \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Eslug\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E.svelte\u002F\n│ │─ __layout.svelte\u002F\n│ └─ index.svelte\u002F\n\u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E.rest of the files\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI’ve left some of the filing structure that isn’t relevant right now.\u003C\u002Fp\u003E\n\u003Cp\u003EFor now I want to focus on the routes folder as this is where I’ll be\ncreating the RSS page.\u003C\u002Fp\u003E\n\u003Ch2\u003EClone the project\u003C\u002Fh2\u003E\n\u003Cp\u003EOk, let’s get to work, I’ll start by cloning the project and changing\ndirectory into the newly cloned project. Then I’ll install the\ndependencies and run the dev server:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token comment\"\u003E# using SSH\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egit\u003C\u002Fspan\u003E clone git@github.com:mattjennings\u002Fsveltekit-blog-template\n\u003Cspan class=\"token comment\"\u003E# using HTTPS\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egit\u003C\u002Fspan\u003E clone https:\u002F\u002Fgithub.com\u002Fmattjennings\u002Fsveltekit-blog-template\n\u003Cspan class=\"token builtin class-name\"\u003Ecd\u003C\u002Fspan\u003E sveltekit-blog-template\n\u003Cspan class=\"token function\"\u003Enpm\u003C\u002Fspan\u003E i\n\u003Cspan class=\"token function\"\u003Enpm\u003C\u002Fspan\u003E run dev\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow Matt’s awesome template is up and running on the default port on\n\u003Ccode\u003Elocalhost:3000\u003C\u002Fcode\u003E. If I go to \u003Ccode\u003Elocalhost:3000\u002Frss.xml\u003C\u002Fcode\u003E I get a 404.\nThis is because I’ve not made that route yet.\u003C\u002Fp\u003E\n\u003Ch2\u003EAdd the RSS route\u003C\u002Fh2\u003E\n\u003Cp\u003ENow to create the endpoint for where the RSS feed will be located:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token function\"\u003Etouch\u003C\u002Fspan\u003E src\u002Froutes\u002Frss.xml.js\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow if I go to \u003Ccode\u003Elocalhost:3000\u002Frss.xml\u003C\u002Fcode\u003E I get a 404.\u003C\u002Fp\u003E\n\u003Cp\u003EIn the \u003Ccode\u003Erss.xml.js\u003C\u002Fcode\u003E file I’ll create a \u003Ccode\u003Eget()\u003C\u002Fcode\u003E function which will\nneed to return the RSS XML and the headers for the endpoint, the XML\nis inside \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FTemplate_literals\" rel=\"noopener\" target=\"_blank\"\u003Etemplate literals\u003C\u002Fa\u003E so I can add in the dynamic data I want\nto return later in this post:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E headers \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Cache-Control'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'max-age=0, s-maxage=3600'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Content-Type'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'application\u002Fxml'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    headers\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token literal-property property\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;rss xmlns:dc=\"https:\u002F\u002Fpurl.org\u002Fdc\u002Felements\u002F1.1\u002F\" xmlns:content=\"https:\u002F\u002Fpurl.org\u002Frss\u002F1.0\u002Fmodules\u002Fcontent\u002F\" xmlns:atom=\"https:\u002F\u002Fwww.w3.org\u002F2005\u002FAtom\" version=\"2.0\"\u003E&lt;\u002Frss\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn the \u003Ccode\u003Eheaders\u003C\u002Fcode\u003E I’m setting the \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FCache-Control#expiration\" rel=\"noopener\" target=\"_blank\"\u003Eexpiration\u003C\u002Fa\u003E to an hour with\n\u003Ccode\u003Es-maxage\u003C\u002Fcode\u003E and for the \u003Ccode\u003Ebody\u003C\u002Fcode\u003E adding in the XML heading. You can check\nout the \u003Ca href=\"https:\u002F\u002Fvalidator.w3.org\u002Ffeed\u002Fdocs\u002Frss2.html\" rel=\"noopener\" target=\"_blank\"\u003EW3C Feed Validation Service\u003C\u002Fa\u003E for more detail on what’s needed\nhere.\u003C\u002Fp\u003E\n\u003Cp\u003ENow if I go check \u003Ccode\u003Elocalhost:3000\u002Frss.xml\u003C\u002Fcode\u003E I get the beginning of my\nRSS feed.\u003C\u002Fp\u003E\n\u003Ch2\u003EAdd \u003Ccode\u003E&lt;channel&gt;\u003C\u002Fcode\u003E required elements\u003C\u002Fh2\u003E\n\u003Cp\u003ENow to add in the \u003Ccode\u003E&lt;channel&gt;\u003C\u002Fcode\u003E element with the required \u003Ccode\u003E&lt;title&gt;\u003C\u002Fcode\u003E,\n\u003Ccode\u003E&lt;link&gt;\u003C\u002Fcode\u003E and \u003Ccode\u003E&lt;description&gt;\u003C\u002Fcode\u003E elements. In Matt’s template there’s an\n\u003Ccode\u003Einfo.js\u003C\u002Fcode\u003E file that contains the project \u003Ccode\u003Ename\u003C\u002Fcode\u003E and \u003Ccode\u003Ewebsite\u003C\u002Fcode\u003E links.\nI’ll import these and hardcode in a description for now.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E website \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$lib\u002Finfo'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E headers \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Cache-Control'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'max-age=0, s-maxage=3600'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Content-Type'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'application\u002Fxml'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    headers\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token literal-property property\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;rss xmlns:dc=\"https:\u002F\u002Fpurl.org\u002Fdc\u002Felements\u002F1.1\u002F\" xmlns:content=\"https:\u002F\u002Fpurl.org\u002Frss\u002F1.0\u002Fmodules\u002Fcontent\u002F\" xmlns:atom=\"https:\u002F\u002Fwww.w3.org\u002F2005\u002FAtom\" version=\"2.0\"\u003E\n      &lt;channel\u003E\n        &lt;title\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ename\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Ftitle\u003E\n        &lt;link\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ewebsite\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Flink\u003E\n        &lt;description\u003EA blog built with SvelteKit about tech and stuff!&lt;\u002Fdescription\u003E\n      &lt;\u002Fchannel\u003E\n    &lt;\u002Frss\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Ch2\u003EAdd posts for the RSS feed\u003C\u002Fh2\u003E\n\u003Cp\u003ENow I’m going to need to add the posts to the RSS feed. I’m going to\ncopy the code used to source the posts from \u003Ccode\u003Esrc\u002Froutes\u002Findex.svelte\u003C\u002Fcode\u003E\nand add it to the \u003Ccode\u003Esrc\u002Flib\u003C\u002Fcode\u003E folder as \u003Ccode\u003Eget-posts.js\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token comment\"\u003E# create the file\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Etouch\u003C\u002Fspan\u003E src\u002Flib\u002Fget-posts.js\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe code for get posts is:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E posts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E Object\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eentries\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emeta\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EglobEager\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'\u002Fposts\u002F**\u002F*.md'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F get post metadata\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E post\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E post\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emetadata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F sort by date\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esort\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ea\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E b\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ea\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Edate \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E b\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Edate \u003Cspan class=\"token operator\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E posts\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI’ll now import that into the \u003Ccode\u003Erss.xml.js\u003C\u002Fcode\u003E file so I can map over the\ncontents for each \u003Ccode\u003E&lt;item&gt;\u003C\u002Fcode\u003E in the RSS feed.\u003C\u002Fp\u003E\n\u003Cp\u003EFirst up though, rather than have the return statement all cluttered\nup with the generated XML I’ll break this into it’s own function:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E getPosts \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$lib\u002Fget-posts'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E website \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$lib\u002Finfo'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E posts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E body \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Exml\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eposts\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E headers \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Cache-Control'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'max-age=0, s-maxage=3600'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Content-Type'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'application\u002Fxml'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    headers\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    body\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003Exml\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token parameter\"\u003Eposts\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;rss xmlns:dc=\"https:\u002F\u002Fpurl.org\u002Fdc\u002Felements\u002F1.1\u002F\" xmlns:content=\"https:\u002F\u002Fpurl.org\u002Frss\u002F1.0\u002Fmodules\u002Fcontent\u002F\" xmlns:atom=\"https:\u002F\u002Fwww.w3.org\u002F2005\u002FAtom\" version=\"2.0\"\u003E\n  &lt;channel\u003E\n    &lt;title\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ename\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Ftitle\u003E\n    &lt;link\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ewebsite\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Flink\u003E\n    &lt;description\u003EA blog built with SvelteKit about tech and stuff!&lt;\u002Fdescription\u003E\n  &lt;\u002Fchannel\u003E\n&lt;\u002Frss\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow it’s a case of mapping over the posts and creating the XML for\neach post in posts. I’ll do that in the template using tags \u003Ccode\u003E${}\u003C\u002Fcode\u003E and\nmapping over the \u003Ccode\u003Eposts\u003C\u002Fcode\u003E variable returned from \u003Ccode\u003EgetPosts\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EHere’s the complete file:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E getPosts \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$lib\u002Fget-posts'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E website \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$lib\u002Finfo'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E posts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E body \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Exml\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eposts\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E headers \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Cache-Control'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'max-age=0, s-maxage=3600'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string-property property\"\u003E'Content-Type'\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'application\u002Fxml'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    headers\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    body\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003Exml\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token parameter\"\u003Eposts\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;rss xmlns:dc=\"https:\u002F\u002Fpurl.org\u002Fdc\u002Felements\u002F1.1\u002F\" xmlns:content=\"https:\u002F\u002Fpurl.org\u002Frss\u002F1.0\u002Fmodules\u002Fcontent\u002F\" xmlns:atom=\"https:\u002F\u002Fwww.w3.org\u002F2005\u002FAtom\" version=\"2.0\"\u003E\n  &lt;channel\u003E\n    &lt;title\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ename\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Ftitle\u003E\n    &lt;link\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ewebsite\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Flink\u003E\n    &lt;description\u003EA blog built with SvelteKit about tech and stuff!&lt;\u002Fdescription\u003E\n    \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Eposts\n      \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token parameter\"\u003Epost\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\n        &lt;item\u003E\n          &lt;title\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Etitle\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002Ftitle\u003E\n          &lt;description\u003EA blog built with SvelteKit about tech and stuff!&lt;\u002Fdescription\u003E\n          &lt;link\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ewebsite\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\u002Fposts\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eslug\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\u002F&lt;\u002Flink\u003E\n          &lt;pubDate\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Edate\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&lt;\u002FpubDate\u003E\n          &lt;content:encoded\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EpreviewHtml\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E \n            &lt;div style=\"margin-top: 50px; font-style: italic;\"\u003E\n              &lt;strong\u003E\n                &lt;a href=\"\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Ewebsite\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\u002Fposts\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E$&#123;\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eslug\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u003E\n                  Keep reading\n                &lt;\u002Fa\u003E\n              &lt;\u002Fstrong\u003E  \n            &lt;\u002Fdiv\u003E\n          &lt;\u002Fcontent:encoded\u003E\n        &lt;\u002Fitem\u003E\n      \u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ejoin\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E''\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\n  &lt;\u002Fchannel\u003E\n&lt;\u002Frss\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E&#96;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EYou’ll notice I’ve added some extra markup for \u003Ccode\u003E&lt;content:encoded&gt;\u003C\u002Fcode\u003E and\nthis uses Matt’s handy package \u003Ccode\u003Eremark-preview\u003C\u002Fcode\u003E to allow me to add\nHTML to the RSS feed.\u003C\u002Fp\u003E\n\u003Cp\u003EThere’s also a link to take the reader to the site’s post via the\n\u003Ccode\u003Epost.slug\u003C\u002Fcode\u003E with some inline styling.\u003C\u002Fp\u003E\n\u003Ch2\u003EConclusion\u003C\u002Fh2\u003E\n\u003Cp\u003ENow if I go to \u003Ccode\u003Elocalhost:3000\u002Frss.xml\u003C\u002Fcode\u003E I get a very reasonable RSS\nfeed that can be used to syndicate to other sites and RSS readers.\u003C\u002Fp\u003E\n\u003Cp\u003EAlthough this is a very specific example I hope it’s helped you\nunderstand how you could do something similar with your own SvelteKit\nproject.\u003C\u002Fp\u003E\n",meta:{date:"2021-08-09T00:00:00.000Z",title:"Make an RSS Feed for your SvelteKit Project",published:true,slug:void 0}},uses:{params:["slug","post"]}}],
					form: null
				},
				paths: {"base":"","assets":""},
				target: document.querySelector('[data-sveltekit-hydrate="vfccdv"]').parentNode,
				version: "1670404777395"
			});
		</script>
	</div>
	</body>
</html>
